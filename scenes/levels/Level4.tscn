[gd_scene load_steps=22 format=4 uid="uid://ccg4fs2lki8kf"]

[ext_resource type="Script" uid="uid://ck70l5uq26u8j" path="res://scenes/levels/level_template.gd" id="1_g8eim"]
[ext_resource type="PackedScene" uid="uid://chmh5oc0s1yja" path="res://scenes/cutScenes/LavaCutScene.tscn" id="2_g8eim"]
[ext_resource type="Texture2D" uid="uid://b8x6o0tf250py" path="res://assets/sprites/tiles/caveTiles.png" id="3_u5dj7"]
[ext_resource type="Texture2D" uid="uid://cnd8ejsunreua" path="res://assets/sprites/tiles/lava tile map final.png" id="4_2xj4m"]
[ext_resource type="Texture2D" uid="uid://da7c3ftiai0rd" path="res://assets/sprites/tiles/lava rock.png" id="5_h6fe6"]
[ext_resource type="PackedScene" uid="uid://do7ygv6kbgkax" path="res://scenes/characters/player.tscn" id="5_ml44n"]
[ext_resource type="Shader" uid="uid://qcqmpjhc25h2" path="res://scenes/levels/Level1.gdshader" id="6_iisik"]
[ext_resource type="Texture2D" uid="uid://cxqgpaotihmtl" path="res://assets/sprites/tiles/lava obstacle tile.png" id="6_ml44n"]
[ext_resource type="Script" uid="uid://xray3g2g41ox" path="res://scenes/levels/camera_2d.gd" id="7_60s12"]
[ext_resource type="Texture2D" uid="uid://bd0kdn2qnngw" path="res://assets/sprites/ui/main ui.png" id="9_k5e6m"]
[ext_resource type="PackedScene" uid="uid://ckuijkhsjh2sk" path="res://scenes/characters/lava_rock.tscn" id="10_iisik"]
[ext_resource type="Script" uid="uid://cqguy0ki13a5y" path="res://scenes/levels/color_rect.gd" id="10_qdxfc"]
[ext_resource type="PackedScene" uid="uid://b0ht5mlea37mo" path="res://scenes/characters/lava_girl.tscn" id="11_60s12"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_7d7pp"]
texture = ExtResource("3_u5dj7")
texture_region_size = Vector2i(250, 250)
1:0/0 = 0
1:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-125, -125, 125, -125, 125, 125, -125, 125)
2:0/0 = 0
2:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-125, -125, 125, -125, 125, 125, -125, 125)
3:0/0 = 0
3:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-125, -125, 125, -125, 125, 125, -125, 125)
5:0/0 = 0
6:0/0 = 0
7:0/0 = 0
0:1/0 = 0
0:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-125, -125, 125, -125, 125, 125, -125, 125)
1:1/0 = 0
2:1/0 = 0
3:1/0 = 0
3:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-125, -125, 125, -125, 125, 125, -125, 125)
5:1/0 = 0
5:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-125, -125, 125, -125, 125, 125, -125, 125)
6:1/0 = 0
7:1/0 = 0
0:2/0 = 0
0:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-125, -125, 125, -125, 125, 125, -125, 125)
1:2/0 = 0
2:2/0 = 0
3:2/0 = 0
3:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-125, -125, 125, -125, 125, 125, -125, 125)
5:2/0 = 0
6:2/0 = 0
7:2/0 = 0
0:3/0 = 0
0:3/0/physics_layer_0/polygon_0/points = PackedVector2Array(-125, -125, 125, -125, 125, 125, -125, 125)
1:3/0 = 0
1:3/0/physics_layer_0/polygon_0/points = PackedVector2Array(-125, -125, 125, -125, 125, 125, -125, 125)
2:3/0 = 0
2:3/0/physics_layer_0/polygon_0/points = PackedVector2Array(-125, -125, 125, -125, 125, 125, -125, 125)
3:3/0 = 0
3:3/0/physics_layer_0/polygon_0/points = PackedVector2Array(-125, -125, 125, -125, 125, 125, -125, 125)
0:4/0 = 0
1:4/0 = 0
2:4/0 = 0
6:4/0 = 0
8:4/0 = 0
9:4/0 = 0
0:5/0 = 0
1:5/0 = 0
2:5/0 = 0
6:5/0 = 0
6:5/0/physics_layer_2/polygon_0/points = PackedVector2Array(-125, -125, 125, -125, 125, 125, -125, 125)
8:5/0 = 0
0:0/0 = 0
0:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-125, -125, 125, -125, 125, 125, -125, 125)
5:4/0 = 0
5:4/0/physics_layer_1/polygon_0/points = PackedVector2Array(-125, -125, 125, -125, 125, 125, -125, 125)

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_u5dj7"]
texture = ExtResource("4_2xj4m")
texture_region_size = Vector2i(250, 250)
0:0/0 = 0
1:0/0 = 0
2:0/0 = 0
3:0/0 = 0
4:0/0 = 0
5:0/0 = 0
6:0/0 = 0
0:1/0 = 0
1:1/0 = 0
2:1/0 = 0
3:1/0 = 0
4:1/0 = 0
5:1/0 = 0
6:1/0 = 0
0:2/0 = 0
1:2/0 = 0
2:2/0 = 0
3:2/0 = 0
4:2/0 = 0
5:2/0 = 0
6:2/0 = 0
0:3/0 = 0
1:3/0 = 0
2:3/0 = 0
3:3/0 = 0
0:4/0 = 0
1:4/0 = 0
2:4/0 = 0
3:4/0 = 0
0:5/0 = 0
1:5/0 = 0
2:5/0 = 0
3:5/0 = 0
3:6/0 = 0
4:6/0 = 0

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_w8irg"]
texture = ExtResource("5_h6fe6")
texture_region_size = Vector2i(250, 250)
0:0/0 = 0

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_k5e6m"]
texture = ExtResource("6_ml44n")
texture_region_size = Vector2i(250, 250)
0:0/0 = 0

[sub_resource type="TileSet" id="TileSet_j08sa"]
tile_size = Vector2i(250, 250)
physics_layer_0/collision_layer = 1
physics_layer_1/collision_layer = 1
physics_layer_2/collision_layer = 1
custom_data_layer_0/name = "Wall"
custom_data_layer_0/type = 2
sources/0 = SubResource("TileSetAtlasSource_7d7pp")
sources/1 = SubResource("TileSetAtlasSource_u5dj7")
sources/2 = SubResource("TileSetAtlasSource_w8irg")
sources/3 = SubResource("TileSetAtlasSource_k5e6m")

[sub_resource type="GDScript" id="GDScript_x4si1"]
script/source = "extends TileMap
# Function to convert the player's world position (node position) to tile coordinates
func get_player_tile():
	# Convert the player's world position to TileMap coordinates
	var player_tile = local_to_map(global_position)  # position refers to the player's world position
	print(\"Player Tile:\", player_tile)  # Debug: Print the player's tile coordinates
	return player_tile
"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_68ib6"]
shader = ExtResource("6_iisik")

[sub_resource type="LabelSettings" id="LabelSettings_m00rq"]
font_size = 300

[node name="Level" type="Node2D" node_paths=PackedStringArray("player", "waifu")]
script = ExtResource("1_g8eim")
player = NodePath("Player")
waifu = NodePath("TileMap/LavaGirl")
meet_cutscene = ExtResource("2_g8eim")
MAX_MOVES = 19

[node name="TileMap" type="TileMap" parent="."]
tile_set = SubResource("TileSet_j08sa")
format = 2
script = SubResource("GDScript_x4si1")

[node name="FloorLayer" type="TileMapLayer" parent="TileMap"]
use_parent_material = true
tile_map_data = PackedByteArray("AAAHAAIAAQABAAIAAAAHAAEAAQABAAIAAAAJAAEAAQABAAEAAAD/////AQACAAIAAAAAAP//AQACAAEAAAAAAP7/AQABAAIAAAAAAP3/AQABAAIAAAD///z/AQACAAIAAAD+//z/AQABAAIAAAD9//z/AQABAAEAAAD8//z/AQABAAIAAAD7//z/AQACAAEAAAD6//z/AQACAAIAAAD5//z/AQABAAIAAAD4//z/AQACAAIAAAD3//3/AQACAAEAAAD2//3/AQACAAIAAAD2/wIAAQACAAIAAAD3/wIAAQABAAEAAAD4/wIAAQABAAEAAAD5/wIAAQACAAIAAAD6/wIAAQACAAIAAAD7/wIAAQABAAEAAAD8/wIAAQACAAEAAAD9/wIAAQABAAEAAAD+/wIAAQABAAIAAAD//wIAAQABAAEAAAAAAAIAAQABAAIAAAABAAIAAQACAAIAAAACAAIAAQABAAEAAAADAAIAAQACAAEAAAAEAAIAAQABAAIAAAAFAAEAAQACAAIAAAAGAAEAAQACAAIAAAAHAAAAAQABAAIAAAAIAAAAAQACAAIAAAAJAAAAAQACAAEAAAAKAP//AQACAAIAAAAKAP7/AQABAAEAAAAJAP3/AQABAAIAAAAIAP3/AQABAAIAAAAHAP3/AQACAAIAAAAGAP3/AQABAAIAAAAFAP3/AQABAAEAAAAEAP3/AQABAAIAAAADAP3/AQACAAIAAAACAP3/AQABAAIAAAABAP3/AQACAAIAAAD///3/AQABAAIAAAD+//3/AQACAAEAAAD9//3/AQABAAEAAAD8//3/AQABAAEAAAD7//3/AQACAAEAAAD6//3/AQABAAIAAAD5//3/AQACAAEAAAD4//7/AQABAAEAAAD3//7/AQACAAEAAAD2//7/AQACAAIAAAD2////AQABAAIAAAD3////AQACAAIAAAD4////AQACAAIAAAD5//7/AQACAAEAAAD6//7/AQABAAIAAAD7//7/AQABAAEAAAD8//7/AQACAAIAAAD9//7/AQABAAEAAAD+//7/AQABAAEAAAD///7/AQABAAEAAAABAP7/AQACAAEAAAACAP7/AQABAAEAAAADAP7/AQABAAIAAAAIAPz/AQABAAEAAAAJAPz/AQACAAEAAAAKAPv/AQACAAIAAAAJAPv/AQABAAIAAAAIAPv/AQABAAIAAAAHAPv/AQABAAEAAAAGAPv/AQABAAEAAAAFAPv/AQACAAEAAAAEAPv/AQACAAIAAAADAPv/AQACAAEAAAACAPv/AQABAAEAAAABAPv/AQABAAIAAAAAAPv/AQABAAIAAAD///v/AQACAAIAAAD4//3/AQABAAIAAAAGAPz/AQABAAEAAAAHAPz/AQABAAEAAAD4/wAAAQABAAIAAAD5/wAAAQABAAEAAAD6/wAAAQACAAIAAAD7/wAAAQACAAEAAAD8/wAAAQACAAIAAAD9/wAAAQACAAEAAAD+/wAAAQABAAEAAAD//wAAAQACAAEAAAAAAAAAAQABAAEAAAABAAAAAQABAAEAAAACAP//AQABAAIAAAADAP//AQACAAIAAAAEAP//AQACAAIAAAAFAP//AQACAAIAAAAGAP//AQACAAEAAAAHAP//AQACAAEAAAAJAP7/AQACAAEAAAAAAPz/AQABAAEAAAACAAAAAQABAAIAAAAHAP7/AQABAAEAAAAGAPr/AQABAAIAAAAFAPr/AQABAAEAAAAEAPr/AQABAAIAAAADAPr/AQABAAIAAAACAPr/AQABAAEAAAABAPr/AQACAAIAAAD5////AQABAAEAAAD7/wEAAQABAAEAAAD8/wEAAQABAAIAAAD9/wEAAQACAAIAAAD+/wEAAQACAAIAAAD//wEAAQABAAIAAAAAAAEAAQABAAEAAAABAAEAAQABAAIAAAADAAAAAQABAAEAAAAEAAAAAQACAAEAAAAFAAAAAQACAAIAAAAEAPz/AQACAAIAAAACAPz/AQACAAIAAAABAPz/AQACAAIAAAD+//v/AQACAAIAAAD9//v/AQACAAEAAAD8//v/AQACAAEAAAD7//v/AQACAAEAAAD6//v/AQABAAIAAAD5//v/AQACAAEAAAD4//v/AQABAAEAAAD3//z/AQABAAIAAAD2//z/AQACAAIAAAD6////AQACAAEAAAD7////AQACAAEAAAD8////AQACAAIAAAD9////AQACAAIAAAD+////AQACAAEAAAABAP//AQACAAIAAAAGAP7/AQABAAIAAAAEAP7/AQABAAEAAAD2/wAAAQABAAEAAAD3/wAAAQACAAIAAAAFAAIAAQABAAEAAAAGAAIAAQACAAIAAAD6/wMAAQACAAEAAAD7/wMAAQACAAEAAAD8/wMAAQABAAIAAAD9/wMAAQABAAIAAAD+/wMAAQABAAIAAAD//wMAAQABAAEAAAD6/wEAAQABAAEAAAD2/wMAAQABAAEAAAD3/wMAAQABAAIAAAD4/wMAAQABAAEAAAD4/wEAAQABAAIAAAD4/wQAAQABAAEAAAD5/wEAAQACAAIAAAD5/wMAAQACAAEAAAD5/wQAAQABAAIAAAD5/wUAAQABAAIAAAD6/wQAAQACAAIAAAD7/wUAAQABAAEAAAD8/wQAAQABAAIAAAD9/wQAAQABAAEAAAD+/wQAAQABAAEAAAAAAAMAAQABAAEAAAABAAMAAQACAAIAAAD//wQAAQACAAEAAAAAAAQAAQABAAIAAAABAAQAAQABAAEAAAD7/wQAAQABAAIAAAACAAMAAQACAAIAAAACAAEAAQABAAEAAAADAAEAAQABAAEAAAAFAP7/AQACAAEAAAAIAP7/AQABAAEAAAAKAP3/AQACAAIAAAAFAPz/AQABAAIAAAADAPz/AQACAAEAAAAGAAAAAQACAAEAAAACAAQAAQABAAIAAAADAAMAAQABAAEAAAAEAAMAAQACAAEAAAAFAAMAAQACAAEAAAACAAYAAQABAAEAAAABAAYAAQABAAEAAAADAAYAAQACAAEAAAAEAAUAAQABAAIAAAAFAAUAAQACAAIAAAAGAAUAAQACAAEAAAAHAAUAAQACAAEAAAAGAAQAAQACAAEAAAAHAAQAAQACAAEAAAAHAAYAAQACAAIAAAAGAAYAAQACAAEAAAAFAAYAAQACAAEAAAAEAAYAAQACAAEAAAACAAUAAQABAAIAAAABAAUAAQABAAIAAAAAAAUAAQACAAEAAAD//wUAAQABAAEAAAADAAQAAQABAAIAAAAEAAQAAQABAAIAAAAFAAQAAQABAAEAAAAHAAMAAQACAAEAAAAIAAEAAQACAAIAAAAEAAEAAQABAAEAAAAGAAMAAQACAAEAAAAJAAIAAQACAAIAAAAJAAMAAQACAAEAAAAIAAMAAQABAAIAAAAIAAQAAQACAAEAAAAIAAIAAQABAAIAAAD+/wUAAQABAAIAAAD9/wUAAQACAAEAAAD8/wUAAQACAAIAAAD4/wUAAQABAAEAAAD3/wQAAQABAAIAAAD3/wEAAQACAAEAAAD3//r/AQACAAEAAAD4//r/AQACAAEAAAD5//r/AQACAAIAAAD6//r/AQACAAEAAAD7//r/AQABAAIAAAD8//r/AQACAAIAAAD9//r/AQACAAEAAAD+//r/AQACAAIAAAD///r/AQACAAEAAAAAAPr/AQABAAEAAAAHAPr/AQABAAIAAAAIAPr/AQABAAEAAAAJAPr/AQABAAIAAAAJAP//AQABAAEAAAAIAP//AQACAAIAAAADAAUAAQACAAIAAAD6/wUAAQABAAIAAAD3/wUAAQABAAIAAAD3//v/AQACAAEAAAAKAPr/AQACAAIAAAAKAPz/AQABAAIAAAAKAAMAAQABAAEAAAAKAAQAAQACAAIAAAAKAAUAAQACAAIAAAAJAAQAAQACAAIAAAAJAAUAAQACAAEAAAAJAAYAAQABAAEAAAAIAAYAAQABAAEAAAAIAAUAAQACAAEAAAAAAAYAAQABAAIAAAD//wYAAQABAAIAAAD+/wYAAQABAAEAAAD9/wYAAQABAAIAAAD8/wYAAQABAAEAAAD7/wYAAQABAAIAAAD6/wYAAQABAAIAAAD5/wYAAQABAAIAAAD4/wYAAQABAAEAAAD3/wYAAQACAAIAAAD2/wYAAQABAAIAAAD2/wUAAQACAAIAAAD2/wQAAQABAAEAAAD2//v/AQABAAEAAAD2//r/AQABAAEAAAAKAAYAAQABAAEAAAAKAAEAAQABAAEAAAAKAAAAAQABAAEAAAAKAAIAAQACAAIAAAD2/wEAAQACAAIAAAA=")
tile_set = SubResource("TileSet_j08sa")

[node name="WallLayer" type="TileMapLayer" parent="TileMap"]
use_parent_material = true
tile_map_data = PackedByteArray("AAD+/wAAAwAAAAAAAAD+////AQAAAAIAAAD+//7/AQAAAAIAAAD+//3/AQAAAAIAAAD///3/AQAAAAIAAAAAAP3/AQAAAAIAAAABAP3/AQAAAAIAAAACAP3/AQAAAAIAAAACAP7/AQAAAAIAAAACAP//AQAAAAIAAAD9/wQAAQAAAAIAAAD+/wQAAQAAAAIAAAD//wQAAQAAAAIAAAAAAAQAAQAAAAIAAAABAAQAAQAAAAIAAAACAAQAAQAAAAIAAAADAAQAAQAAAAIAAAAEAAQAAQAAAAIAAAD9////AQAAAAIAAAD8////AQAAAAIAAAD8/wAAAQAAAAIAAAD7/wAAAQAAAAIAAAD7/wIAAQAAAAIAAAD7/wEAAQAAAAIAAAD7/wMAAQAAAAIAAAD8/wMAAQAAAAIAAAD8/wQAAQAAAAIAAAACAAAAAwAAAAAAAAADAP//AQAAAAEAAAAEAP//AQAAAAEAAAAEAAAAAQAAAAEAAAAFAAAAAQAAAAEAAAAFAAEAAQAAAAEAAAAFAAIAAQAAAAEAAAAFAAMAAQAAAAEAAAAEAAMAAQAAAAEAAAADAAEAAwAAAAAAAAA=")
tile_set = SubResource("TileSet_j08sa")

[node name="LavaGirl" parent="TileMap" instance=ExtResource("11_60s12")]
position = Vector2(133, -384)

[node name="Player" parent="." instance=ExtResource("5_ml44n")]
position = Vector2(-889, 599)

[node name="LightingEffect" type="ColorRect" parent="."]
visible = false
material = SubResource("ShaderMaterial_68ib6")
offset_left = -2144.0
offset_top = -1185.0
offset_right = -2104.0
offset_bottom = -1145.0
scale = Vector2(115.727, 65.5356)

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2(0, 248)
offset = Vector2(175, 125)
zoom = Vector2(0.25, 0.25)
script = ExtResource("7_60s12")

[node name="RockContainer" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="Rock2" parent="RockContainer" instance=ExtResource("10_iisik")]
position = Vector2(-904, 384)

[node name="Rock3" parent="RockContainer" instance=ExtResource("10_iisik")]
position = Vector2(-640, 616)

[node name="Rock4" parent="RockContainer" instance=ExtResource("10_iisik")]
position = Vector2(376, -128)

[node name="Rock10" parent="RockContainer" instance=ExtResource("10_iisik")]
position = Vector2(133, 376)

[node name="Rock11" parent="RockContainer" instance=ExtResource("10_iisik")]
position = Vector2(376, 376)

[node name="Rock12" parent="RockContainer" instance=ExtResource("10_iisik")]
position = Vector2(648, 632)

[node name="Rock13" parent="RockContainer" instance=ExtResource("10_iisik")]
position = Vector2(896, 624)

[node name="Rock5" parent="RockContainer" instance=ExtResource("10_iisik")]
position = Vector2(-128, -120)

[node name="Rock6" parent="RockContainer" instance=ExtResource("10_iisik")]
position = Vector2(-128, 120)

[node name="Rock7" parent="RockContainer" instance=ExtResource("10_iisik")]
position = Vector2(-128, 376)

[node name="Rock8" parent="RockContainer" instance=ExtResource("10_iisik")]
position = Vector2(-128, 624)

[node name="Rock9" parent="RockContainer" instance=ExtResource("10_iisik")]
position = Vector2(-128, 880)

[node name="Rock" parent="RockContainer" instance=ExtResource("10_iisik")]
position = Vector2(-640, 128)

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="UI" type="Control" parent="CanvasLayer"]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0
metadata/_edit_use_anchors_ = true

[node name="Play" type="Button" parent="CanvasLayer/UI"]
layout_mode = 0
offset_left = 816.0
offset_top = 568.0
offset_right = 857.0
offset_bottom = 599.0
text = "Play"
metadata/_edit_use_anchors_ = true

[node name="Restart" type="Button" parent="CanvasLayer/UI"]
layout_mode = 0
offset_left = 944.0
offset_top = 568.0
offset_right = 1009.0
offset_bottom = 599.0
text = "Restart"
metadata/_edit_use_anchors_ = true

[node name="StartRecording" type="Button" parent="CanvasLayer/UI"]
layout_mode = 0
offset_left = 744.0
offset_top = 512.0
offset_right = 925.0
offset_bottom = 543.0
text = "Start Recording Inputs"
metadata/_edit_use_anchors_ = true

[node name="Sprite2D" type="Sprite2D" parent="CanvasLayer/UI"]
position = Vector2(376, 536)
scale = Vector2(0.3, 0.3)
texture = ExtResource("9_k5e6m")

[node name="MovesLabel" type="Label" parent="CanvasLayer/UI/Sprite2D"]
offset_left = -1016.0
offset_top = -224.0
offset_right = -674.0
offset_bottom = 185.0
label_settings = SubResource("LabelSettings_m00rq")
horizontal_alignment = 1
vertical_alignment = 1
metadata/_edit_use_anchors_ = true

[node name="ArrowContainer" type="Container" parent="CanvasLayer/UI/Sprite2D"]
offset_left = -506.667
offset_top = -26.6667
offset_right = -466.667
offset_bottom = 13.3333
scale = Vector2(30.4695, 12.4364)
metadata/_edit_use_anchors_ = true

[node name="ColorRect" type="ColorRect" parent="CanvasLayer"]
visible = false
offset_left = -2424.0
offset_top = -1264.0
offset_right = 2664.0
offset_bottom = 1728.0
color = Color(0, 0, 0, 1)
script = ExtResource("10_qdxfc")

[connection signal="pressed" from="CanvasLayer/UI/Play" to="." method="_on_play_pressed"]
[connection signal="pressed" from="CanvasLayer/UI/Restart" to="." method="_on_restart_pressed"]
[connection signal="pressed" from="CanvasLayer/UI/StartRecording" to="." method="_on_start_recording_pressed"]
